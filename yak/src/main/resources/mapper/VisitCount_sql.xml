<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <!-- 맵핑될 DAO 인터페이스의 Full name 을 줍니다. -->
 <mapper namespace="visit"> 
<!-- id 속성은 DAO 의 메소드와 같아야 한다. 여기의 boardVO 는 mybatis-confg.xml 에 Alias 되어 있습니다. -->

		<insert id="insertvisit">
		INSERT
            INTO VISITOR
            (
            	VISIT_ID,
                VISIT_IP,
                VISIT_TIME,
                <if test="visit_refer != null and visit_refer !=''">
                VISIT_REFER,
                </if>
                VISIT_AGENT,
                VISIT_TIMEE
            )
            VALUES
            (
                VISITOR_NUM.NEXTVAL,
                #{visit_ip},
                to_char(sysdate, 'YYYY-MM-DD HH24:MI:SS'),
                <if test="visit_refer != null and visit_refer !=''">
                #{visit_refer},
                </if>
                #{visit_agent},
                to_char(sysdate, 'YYYY-MM-DD')
            )
        </insert>
        
    <update id="toady" >
		update today_visitor set today = #{count}
	</update>
    
</mapper>